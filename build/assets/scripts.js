document.addEventListener("DOMContentLoaded",function(){document.body.classList.remove("no-js"),document.body.classList.add("js")}),function(t,e){function s(e){if(this===t&&"querySelector"in document&&"localStorage"in window&&"addEventListener"in window)return new s(e);this.options=e||{},this.settings={};for(var i in this.defaults)this.settings[i]=this.options[i]||this.defaults[i];if(this.settings.userId=this.options.userId||null,this.settings.groupId=this.options.group_id||null,this.settings.setId=this.options.setId||null,!this.settings.userId&&!this.settings.groupId)throw new Error("One valid ID needs to be passed in");if(this.settings.setId&&(this.ApiConfig.method="flickr.photosets.getPhotos"),this.images=[],this.imageData=[],this.success=this.options.success||null,this.complete=this.options.complete||null,this.template=this.options.template||null,this.setElement(),!this.element)throw new Error("Can't find a valid element");this.run()}s.prototype.run=function(){var t=new XMLHttpRequest;t.open("GET",this.buildURL(),!0),t.onreadystatechange=function(){if(4==t.readyState){if(!t.responseText)throw new Error("An unknown error occurred");this.parse(JSON.parse(t.responseText))}}.bind(this),t.send()},s.prototype.setElement=function(){var t=this.options.target||"#Flickfeed";this.element=e.querySelector(t)},s.prototype.parse=function(t){if(!t.photos&&!t.photoset)throw t.code?new Error(t.message):new Error("An unknown error occurred");this.data=t,this.imageData=t.photos?t.photos.photo:t.photoset.photo,this.processImages()},s.prototype.processImages=function(){for(var t=0;t<this.imageData.length;t++)this.images.push(this.buildImageUrl(this.imageData[t]));this.success&&"function"==typeof this.success?this.success(this.images):this.output()},s.prototype.output=function(){var t=function(){this.complete&&"function"==typeof this.complete&&this.complete()}.bind(this);if(this.template&&"string"==typeof this.template)this.element.innerHTML=this.compileTemplate(),t();else{for(var s=e.createDocumentFragment(),i=0;i<this.images.length;i++){var o=new Image;o.src=this.images[i],o.className="Flickfeed-image",s.appendChild(o)}this.element.appendChild(s),t()}},s.prototype.compileTemplate=function(){for(var t="",e=0;e<this.images.length;e++){var s=this.template.replace(/{{image}}/g,this.images[e]);s=s.replace(/{{link}}/g,"http://www.flickr.com/photos/"+(this.imageData[e].owner||this.data.photoset.owner)+"/"+this.imageData[e].id+"/"),s=s.replace(/{{title}}/g,this.imageData[e].title),t+=s}return t},s.prototype.ApiConfig={root:"https://api.flickr.com/services/rest/",method:"flickr.photos.search",ApiKey:"bf1842074c9c69fbc9d2a080569ae2ff",format:"json",extras:["nojsoncallback=1"]},s.prototype.defaults={limit:10,size:"m",sort:"date-posted-desc"},s.prototype.buildURL=function(){return this.ApiConfig.root+"?method="+this.ApiConfig.method+"&api_key="+this.ApiConfig.ApiKey+(this.settings.userId?"&user_id="+this.settings.userId+(this.settings.setId?"&photoset_id="+this.settings.setId:""):"&group_id="+this.settings.groupId)+"&format="+this.ApiConfig.format+"&sort="+this.settings.sort+"&per_page="+this.settings.limit+"&"+this.ApiConfig.extras.join("&")},s.prototype.buildImageUrl=function(t){return"http://farm"+t.farm+".staticflickr.com/"+t.server+"/"+t.id+"_"+t.secret+"_"+this.settings.size+".jpg"},t.Flickfeed=s}(window,document);